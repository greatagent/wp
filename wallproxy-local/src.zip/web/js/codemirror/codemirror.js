window.CodeMirror=function(){function n(a,b){function c(d){(!i.onDragEvent||!i.onDragEvent(A,Wa(d)))&&ib(d)}function e(d){return 0<=d&&d<t.size}function g(d){for(var a=t;!a.lines;)for(var l=0;;++l){var b=a.children[l],c=b.chunkSize();if(d<c){a=b;break}d-=c}return a.lines[d]}function j(d,a){la=!0;for(var l=a-d.height,b=d;b;b=b.parent)b.height+=l}function m(d,a){d.styles||d.highlight(N,d.stateAfter=Xa(Ea(d)),i.tabSize);return d.getContent(i.tabSize,a,i.lineWrapping)}function fa(d){var a={line:0,ch:0};
pc(a,{line:t.size-1,ch:g(t.size-1).text.length},jb(d),a,a);wa=!0}function x(d){if(!i.onDragEvent||!i.onDragEvent(A,Wa(d))){D(d);var a=Ya(d,!0),l=d.dataTransfer.files;if(a&&!i.readOnly)if(l&&l.length&&window.FileReader&&window.File)for(var b=l.length,c=Array(b),k=0,d=function(d,l){var h=new FileReader;h.onload=function(){c[l]=h.result;++k==b&&(a=C(a),p(function(){var d=S(c.join(""),a,a);ha(a,d)})())};h.readAsText(d)},h=0;h<b;++h)d(l[h],h);else if(!kb||K(a,f.from)||K(f.to,a))try{(c=d.dataTransfer.getData("Text"))&&
qc(function(){var d=f.from,l=f.to;ha(a,a);kb&&S("",d,l);O(c);ia()})}catch(Uc){}}}function Pb(d){var a=Qb();d.dataTransfer.setData("Text",a);d.dataTransfer.setDragImage&&d.dataTransfer.setDragImage(v("img"),0,0)}function lb(d,a){if("string"==typeof d&&(d=Rb[d],!d))return!1;var l=ja;try{i.readOnly&&(mb=!0),a&&(ja=null),d(A)}catch(b){if(b!=rc)throw b;return!1}finally{ja=l,mb=!1}return!0}function sc(d){function a(){h=!0}var l=Sb(i.keyMap),b=l.auto;clearTimeout(tc);b&&!uc(d)&&(tc=setTimeout(function(){Sb(i.keyMap)==
l&&(i.keyMap=b.call?b.call(null,A):b)},50));var c=Fa[F(d,"keyCode")],k=!1,k=xa&&nb;if(null==c||d.altGraphKey)return!1;F(d,"altKey")&&(c="Alt-"+c);if(F(d,k?"metaKey":"ctrlKey"))c="Ctrl-"+c;if(F(d,k?"ctrlKey":"metaKey"))c="Cmd-"+c;var h=!1,k=F(d,"shiftKey")?ob("Shift-"+c,i.extraKeys,i.keyMap,function(d){return lb(d,!0)},a)||ob(c,i.extraKeys,i.keyMap,function(d){if("string"==typeof d&&/^go[A-Z]/.test(d))return lb(d)},a):ob(c,i.extraKeys,i.keyMap,lb,a);h&&(k=!1);k&&(D(d),pb(),Ga&&(d.oldKeyCode=d.keyCode,
d.keyCode=0));return k}function vc(d){W||P();Ga&&27==d.keyCode&&(d.returnValue=!1);La&&ba()&&(La=!1);if(!i.onKeyEvent||!i.onKeyEvent(A,Wa(d))){var a=F(d,"keyCode");Ka(16==a||F(d,"shiftKey"));var l=sc(d);xa&&(Tb=l?a:null,!l&&(88==a&&F(d,nb?"metaKey":"ctrlKey"))&&O(""))}}function P(){if("nocursor"!=i.readOnly){if(!W){if(i.onFocus)i.onFocus(A);W=!0;-1==r.className.search(/\bCodeMirror-focused\b/)&&(r.className+=" CodeMirror-focused")}ca();pb()}}function L(){if(W){if(i.onBlur)i.onBlur(A);W=!1;ya&&p(function(){ya&&
(ya(),ya=null)})();r.className=r.className.replace(" CodeMirror-focused","")}clearInterval(Ub);setTimeout(function(){W||(ja=null)},150)}function pc(d,a,l,b,c){if(!mb){var k=[];t.iter(d.line,a.line+1,function(d){k.push(Ma(d.text,d.markedSpans))});if(H)for(H.addChange(d.line,l.length,k);H.done.length>i.undoDepth;)H.done.shift();var h=I(k[0]),g=I(G(k)),e=d.ch,f=a.ch;if(h||g){if(h)for(var j=0,u;j<h.length;++j){var o=h[j],m=o.marker;if(null==o.from||(m.inclusiveLeft?o.from<=e:o.from<e)||"bookmark"==m.type&&
o.from==e&&void 0!=o.from){var r=null==o.to||(m.inclusiveRight?o.to>=e:o.to>e);(u||(u=[])).push({from:o.from,to:r?null:o.to,marker:m})}}h=u;if(g)for(var j=0,z;j<g.length;++j)if(u=g[j],o=u.marker,null==u.to||(o.inclusiveRight?u.to>=f:u.to>f)||"bookmark"==o.type&&u.from==f)m=null==u.from||(o.inclusiveLeft?u.from<=f:u.from<f),(z||(z=[])).push({from:m?null:u.from-f,to:null==u.to?null:u.to-f,marker:o});g=z;z=1==l.length;j=G(l).length+(z?e:0);if(h)for(f=0;f<h.length;++f)u=h[f],null==u.to&&((o=qb(g,u.marker))?
z&&(u.to=null==o.to?null:o.to+j):u.to=e);if(g)for(f=0;f<g.length;++f)(u=g[f],null!=u.to&&(u.to+=j),null==u.from)?(o=qb(h,u.marker),o||(u.from=j,z&&(h||(h=[])).push(u))):(u.from+=j,z&&(h||(h=[])).push(u));e=[Ma(l[0],h)];if(!z){z=l.length-2;var p;if(0<z&&h)for(f=0;f<h.length;++f)null==h[f].to&&(p||(p=[])).push({from:null,to:null,marker:h[f].marker});for(f=0;f<z;++f)e.push(Ma(l[f+1],p));e.push(Ma(G(l),g))}l=e}ta(d,a,l,b,c)}}function M(d,a){if(d.length){for(var l=d.pop(),b=[],c=l.length-1;0<=c;c-=1){var k=
l[c],h=[],f=k.start+k.added;t.iter(k.start,f,function(d){h.push(Ma(d.text,d.markedSpans))});b.push({start:k.start,added:k.old.length,old:h});var e=k.start+k.old.length-1,i;i=Q(G(h));var j=Q(G(k.old));if(j)if(i){for(var m=i.length,o=j.length;0<=m&&0<=o&&i.charAt(m)==j.charAt(o);--m,--o);i=o+1}else i=j.length;else i=0;e={line:e,ch:i};ta({line:k.start,ch:0},{line:f-1,ch:g(f-1).text.length},k.old,e,e)}wa=!0;a.push(b)}}function ta(d,a,l,b,c){if(!mb){var k=!1,h=ma.text.length;i.lineWrapping||t.iter(d.line,
a.line+1,function(d){if(!d.hidden&&d.text.length==h)return k=!0});if(d.line!=a.line||1<l.length)la=!0;var e=a.line-d.line,ga=g(d.line),m=g(a.line),p=G(l);if(0==d.ch&&0==a.ch&&""==Q(p)){for(var u=[],o=0,n=l.length-1;o<n;++o)u.push(new Na(Q(l[o]),I(l[o])));m.update(m.text,I(p));e&&t.remove(d.line,e,Za);u.length&&t.insert(d.line,u)}else if(ga==m)if(1==l.length)ga.update(ga.text.slice(0,d.ch)+Q(l[0])+ga.text.slice(a.ch),I(l[0]));else{u=[];o=1;for(n=l.length-1;o<n;++o)u.push(new Na(Q(l[o]),I(l[o])));u.push(new Na(Q(p)+
ga.text.slice(a.ch),I(p)));ga.update(ga.text.slice(0,d.ch)+Q(l[0]),I(l[0]));t.insert(d.line+1,u)}else if(1==l.length)ga.update(ga.text.slice(0,d.ch)+Q(l[0])+m.text.slice(a.ch),I(l[0])),t.remove(d.line+1,e,Za);else{u=[];ga.update(ga.text.slice(0,d.ch)+Q(l[0]),I(l[0]));m.update(Q(p)+m.text.slice(a.ch),I(p));o=1;for(n=l.length-1;o<n;++o)u.push(new Na(Q(l[o]),I(l[o])));1<e&&t.remove(d.line+1,e-1,Za);t.insert(d.line+1,u)}if(i.lineWrapping){var v=Math.max(5,r.clientWidth/Vb()-3);t.iter(d.line,d.line+l.length,
function(d){if(!d.hidden){var a=Math.ceil(d.text.length/v)||1;a!=d.height&&j(d,a)}})}else t.iter(d.line,d.line+l.length,function(d){var a=d.text;!d.hidden&&a.length>h&&(ma=d,h=a.length,rb=!0,k=!1)}),k&&($a=!0);Y=Math.min(Y,d.line);sb(400);e=l.length-e-1;pa.push({from:d.line,to:a.line+1,diff:e});if(i.onChange){for(o=0;o<l.length;++o)"string"!=typeof l[o]&&(l[o]=l[o].text);d={from:d,to:a,text:l};if(Oa){for(l=Oa;l.next;l=l.next);l.next=d}else Oa=d}ab(C(b),C(c),f.from.line<=Math.min(a.line,a.line+e)?
f.from.line:f.from.line+e,f.to.line<=Math.min(a.line,a.line+e)?f.to.line:f.to.line+e)}}function Z(){var d=t.height*na()+2*B.offsetTop;return 0.99*d>r.offsetHeight?d:!1}function X(d){var a=Z();w.style.display=a?"block":"none";a?(wc.style.height=oa.style.minHeight=a+"px",w.style.height=r.clientHeight+"px",null!=d&&(w.scrollTop=r.scrollTop=d,tb&&setTimeout(function(){w.scrollTop==d&&(w.scrollTop=d+(d?-1:1),w.scrollTop=d)},0))):oa.style.minHeight="";ub.style.top=Pa*na()+"px"}function xc(){ma=g(0);rb=
!0;var d=ma.text.length;t.iter(1,t.size,function(a){var l=a.text;!a.hidden&&l.length>d&&(d=l.length,ma=a)});$a=!1}function S(d,a,l){function b(ka){if(K(ka,a))return ka;if(!K(l,ka))return c;var h=ka.line+d.length-(l.line-a.line)-1,e=ka.ch;ka.line==l.line&&(e+=G(d).length-(l.ch-(l.line==a.line?a.ch:0)));return{line:h,ch:e}}var a=C(a),l=l?C(l):a,d=jb(d),c;da(d,a,l,function(d){c=d;return{from:b(f.from),to:b(f.to)}});return c}function O(d,a){da(jb(d),f.from,f.to,function(d){return"end"==a?{from:d,to:d}:
"start"==a?{from:f.from,to:f.from}:{from:f.from,to:d}})}function da(d,a,l,b){var c=1==d.length?d[0].length+a.ch:G(d).length,b=b({line:a.line+d.length-1,ch:c});pc(a,l,d,b.from,b.to)}function yc(d,a,l){var b=d.line,c=a.line;if(b==c)return g(b).text.slice(d.ch,a.ch);var k=[g(b).text.slice(d.ch)];t.iter(b+1,c,function(d){k.push(d.text)});k.push(g(c).text.slice(0,a.ch));return k.join(l||"\n")}function Qb(d){return yc(f.from,f.to,d)}function ca(){La||Wb.set(i.pollInterval,function(){ba();W&&ca()})}function bb(){function d(){!ba()&&
!a?(a=!0,Wb.set(60,d)):(La=!1,ca())}var a=!1;La=!0;Wb.set(20,d)}function ba(){if(!W||Qc(s)||i.readOnly)return!1;var d=s.value;if(d==ea)return!1;vb||zc();ja=null;for(var a=0,l=Math.min(ea.length,d.length);a<l&&ea[a]==d[a];)++a;a<ea.length?f.from={line:f.from.line,ch:f.from.ch-(ea.length-a)}:wb&&(y(f.from,f.to)&&!Xb)&&(f.to={line:f.to.line,ch:Math.min(g(f.to.line).text.length,f.to.ch+(d.length-a))});O(d.slice(a),"end");1E3<d.length?s.value=ea="":ea=d;vb||Ac();Xb=!1;return!0}function xb(d){y(f.from,
f.to)?d&&(ea=s.value=""):(ea="",s.value=Qb(),W&&(d=s,Yb?(d.selectionStart=0,d.selectionEnd=d.value.length):d.select()))}function ia(){"nocursor"!=i.readOnly&&s.focus()}function Bc(){var d=qa(f.inverted?f.from:f.to);return{x:i.lineWrapping?Math.min(d.x,B.offsetWidth):d.x,y:d.y,yBot:d.yBot}}function Cc(d,a,l,b){d=Dc(d,a,l,b);null!=d.scrollLeft&&(r.scrollLeft=d.scrollLeft);null!=d.scrollTop&&(w.scrollTop=r.scrollTop=d.scrollTop)}function Dc(d,a,l,b){var c=B.offsetLeft,k=B.offsetTop,a=a+k,b=b+k,d=d+c,
l=l+c,h=r.clientHeight,e=w.scrollTop,f={},g=Z()||Infinity,j=a<k+10,k=b+k>g-10;a<e?f.scrollTop=j?0:Math.max(0,a):b>e+h&&(f.scrollTop=(k?g:b)-h);a=r.clientWidth;b=r.scrollLeft;h=i.fixedGutter?V.clientWidth:0;c=d<h+c+10;d<b+h||c?(c&&(d=0),f.scrollLeft=Math.max(0,d-10-h)):l>a+b-3&&(f.scrollLeft=l+10-a);return f}function Ca(d){var a=na(),l=(null!=d?d:w.scrollTop)-B.offsetTop,d=Math.max(0,Math.floor(l/a)),a=Math.ceil((l+r.clientHeight)/a);return{from:Zb(t,d),to:Zb(t,a)}}function za(d,a,l){function b(){var d=
$.firstChild,a=!1;t.iter(E,J,function(b){if(d){if(!b.hidden){var l=Math.round(d.offsetHeight/fa)||1;b.height!=l&&(j(b,l),la=a=!0)}d=d.nextSibling}});return a}if(r.clientWidth){var c=Ca(l);if(!0!==d&&0==d.length&&c.from>E&&c.to<J)X(l);else{var k=Math.max(c.from-100,0),h=Math.min(t.size,c.to+100);E<k&&20>k-E&&(k=E);J>h&&20>J-h&&(h=Math.min(t.size,J));if(!0===d)d=[];else{for(var c=[{from:E,to:J,domStart:0}],e=0,f=d.length||0;e<f;++e){for(var g=d[e],p=[],u=g.diff||0,o=0,n=c.length;o<n;++o){var s=c[o];
g.to<=s.from&&g.diff?p.push({from:s.from+u,to:s.to+u,domStart:s.domStart}):g.to<=s.from||g.from>=s.to?p.push(s):(g.from>s.from&&p.push({from:s.from,to:g.from,domStart:s.domStart}),g.to<s.to&&p.push({from:g.to+u,to:s.to+u,domStart:s.domStart+(g.to-s.from)}))}c=p}d=c}for(var z=d,c=d=0;c<z.length;++c)e=z[c],e.from<k&&(e.domStart+=k-e.from,e.from=k),e.to>h&&(e.to=h),e.from>=e.to?z.splice(c--,1):d+=e.to-e.from;if(d==h-k&&k==E&&h==J)X(l);else{z.sort(function(d,a){return d.domStart-a.domStart});var fa=na(),
d=V.style.display;$.style.display="none";c=k;e=h;f=function(d){var a=d.nextSibling;d.parentNode.removeChild(d);return a};if(z.length){for(var g=0,q=$.firstChild,p=0;p<z.length;++p){for(u=z[p];u.domStart>g;)q=f(q),g++;for(var w=0,u=u.to-u.from;w<u;++w)q=q.nextSibling,g++}for(;q;)q=f(q)}else Ha($);var ba=z.shift(),q=$.firstChild,w=c;t.iter(c,e,function(d){ba&&ba.to==w&&(ba=z.shift());if(!ba||ba.from>w){if(d.hidden)var a=v("pre");else if(a=m(d),d.className&&(a.className=d.className),d.bgClassName)d=
v("pre","\u00a0",d.bgClassName,"position: absolute; left: 0; right: 0; top: 0; bottom: 0; z-index: -2"),a=v("div",[d,a],null,"position: relative");$.insertBefore(a,q)}else q=q.nextSibling;++w});$.style.display=V.style.display="";(c=k!=E||h!=J||Ec!=r.clientHeight+fa)&&(Ec=r.clientHeight+fa);(k!=E||h!=J&&i.onViewportChange)&&setTimeout(function(){if(i.onViewportChange)i.onViewportChange(A,k,h)});E=k;J=h;Pa=$b(t,k);sb(100);if($.childNodes.length!=J-E)throw Error("BAD PATCH! "+JSON.stringify(z)+" size="+
(J-E)+" nodes="+$.childNodes.length);i.lineWrapping&&b();V.style.display=d;(c||la)&&ua()&&i.lineWrapping&&b()&&ua();X(l);Da();if(!a&&i.onUpdate)i.onUpdate(A);return!0}}}else E=J=Pa=0}function ua(){if(i.gutter||i.lineNumbers){var d=ub.offsetHeight,a=r.clientHeight;V.style.height=(2>d-a?a:d)+"px";var b=document.createDocumentFragment(),c=E,e;t.iter(E,Math.max(J,E+1),function(d){if(d.hidden)b.appendChild(v("pre"));else{var a=d.gutterMarker,U=i.lineNumbers?i.lineNumberFormatter(c+i.firstLineNumber):null;
a&&a.text?U=a.text.replace("%N%",null!=U?U:""):null==U&&(U="\u00a0");var h=b.appendChild(v("pre",null,a&&a.style));h.innerHTML=U;for(U=1;U<d.height;++U)h.appendChild(v("br")),h.appendChild(document.createTextNode("\u00a0"));a||(e=c)}++c});V.style.display="none";Ha(Qa).appendChild(b);if(null!=e&&i.lineNumbers){for(var d=Qa.childNodes[e-E],a=String(t.size).length,f=d.firstChild.textContent||d.firstChild.innerText||d.firstChild.nodeValue||"",h="";f.length+h.length<a;)h+="\u00a0";h&&d.insertBefore(document.createTextNode(h),
d.firstChild)}V.style.display="";d=2<Math.abs((parseInt(B.style.marginLeft)||0)-V.offsetWidth);B.style.marginLeft=V.offsetWidth+"px";la=!1;return d}}function Da(){var d=y(f.from,f.to),a=qa(f.from,!0),b=d?a:qa(f.to,!0),c=f.inverted?a:b,e=na(),k=Ra(T),h=Ra($);Ia.style.top=Math.max(0,Math.min(r.offsetHeight,c.y+h.top-k.top))+"px";Ia.style.left=Math.max(0,Math.min(r.offsetWidth,c.x+h.left-k.left))+"px";if(d)R.style.top=c.y+"px",R.style.left=(i.lineWrapping?Math.min(c.x,B.offsetWidth):c.x)+"px",R.style.display=
"",yb.style.display="none";else{var d=a.y==b.y,g=document.createDocumentFragment(),j=B.clientWidth||B.offsetWidth,c=B.clientHeight||B.offsetHeight,k=function(d,a,b,l){g.appendChild(v("div",null,"CodeMirror-selected","position: absolute; left: "+d+"px; top: "+a+"px; "+(Rc?"width: "+(!b?j:j-b-d)+"px":"right: "+b+"px")+"; height: "+l+"px"))};f.from.ch&&0<=a.y&&k(a.x,a.y,d?j-b.x:0,e);a=Math.max(0,a.y+(f.from.ch?e:0));h=Math.min(b.y,c)-a;h>0.2*e&&k(0,a,0,h);(!d||!f.from.ch)&&b.y<c-0.5*e&&k(0,b.y,j-b.x,
e);Ha(yb).appendChild(g);R.style.display="none";yb.style.display=""}}function Ka(d){ja=d?ja||(f.inverted?f.to:f.from):null}function ha(d,a){var b=ja&&C(ja);b&&(K(b,d)?d=b:K(a,b)&&(a=b));ab(d,a);zb=!0}function ab(d,a,b,c){Ab=null;null==b&&(b=f.from.line,c=f.to.line);if(!y(f.from,d)||!y(f.to,a)){if(K(a,d))var e=a,a=d,d=e;d.line!=b&&((b=sa(d,b,f.from.ch))?d=b:ac(d.line,!1));a.line!=c&&(a=sa(a,c,f.to.ch));y(d,a)?f.inverted=!1:y(d,f.to)?f.inverted=!1:y(a,f.from)&&(f.inverted=!0);if(i.autoClearEmptyLines&&
y(f.from,f.to)&&(f.inverted?d:a).line!=f.from.line&&f.from.line<t.size){var k=g(f.from.line);/^\s+$/.test(k.text)&&setTimeout(p(function(){if(k.parent&&/^\s+$/.test(k.text)){var d=Ea(k);S("",{line:d,ch:0},{line:d,ch:k.text.length})}},10))}f.from=d;f.to=a;Aa=!0}}function sa(d,a,b){function c(a){for(var U=d.line+a,e=1==a?t.size:-1;U!=e;){var ka=g(U);if(!ka.hidden){a=d.ch;if(f||a>b||a>ka.text.length)a=ka.text.length;return{line:U,ch:a}}U+=a}}var e=g(d.line),f=d.ch==e.text.length&&d.ch!=b;return!e.hidden?
d:d.line>=a?c(1)||c(-1):c(-1)||c(1)}function Ba(d,a,b){d=C({line:d,ch:a||0});(b?ha:ab)(d,d)}function va(d){return Math.max(0,Math.min(d,t.size-1))}function C(d){if(0>d.line)return{line:0,ch:0};if(d.line>=t.size)return{line:t.size-1,ch:g(t.size-1).text.length};var a=d.ch,b=g(d.line).text.length;return null==a||a>b?{line:d.line,ch:b}:0>a?{line:d.line,ch:0}:d}function Ja(d,a){function b(a){if(k==(0>d?0:h.text.length)){if(a=!a)a:{for(var a=e+d,c=0>d?-1:t.size;a!=c;a+=d){var l=g(a);if(!l.hidden){e=a;h=
l;a=!0;break a}}a=void 0}if(a)k=0>d?h.text.length:0;else return!1}else k+=d;return!0}var c=f.inverted?f.from:f.to,e=c.line,k=c.ch,h=g(e);if("char"==a)b();else if("column"==a)b(!0);else if("word"==a)for(c=!1;!(0>d)||b();){if(Bb(h.text.charAt(k)))c=!0;else if(c){0>d&&(d=1,b());break}if(0<d&&!b())break}return{line:e,ch:k}}function Va(a){var b=g(a.line).text,l=a.ch,c=a.ch;if(b){!1===a.after||c==b.length?--l:++c;for(var e=b.charAt(l),e=Bb(e)?Bb:/\s/.test(e)?function(a){return/\s/.test(a)}:function(a){return!/\s/.test(a)&&
Bb(a)};0<l&&e(b.charAt(l-1));)--l;for(;c<b.length&&e(b.charAt(c));)++c}return{from:{line:a.line,ch:l},to:{line:a.line,ch:c}}}function Cb(a,b){b||(b="add");if("smart"==b)if(N.indent)var c=Xa(a);else b="prev";var e=g(a),f=e.indentation(i.tabSize),k=e.text.match(/^\s*/)[0],h;"smart"==b&&(h=N.indent(c,e.text.slice(k.length),e.text),h==rc&&(b="prev"));"prev"==b?h=a?g(a-1).indentation(i.tabSize):0:"add"==b?h=f+i.indentUnit:"subtract"==b&&(h=f-i.indentUnit);h=Math.max(0,h);c="";f=0;if(i.indentWithTabs)for(var j=
Math.floor(h/i.tabSize);j;--j)f+=i.tabSize,c+="\t";f<h&&(c+=Fc(h-f));c!=k&&S(c,{line:a,ch:0},{line:a,ch:k.length});e.stateAfter=null}function fb(){N=n.getMode(i,i.mode);t.iter(0,t.size,function(a){a.stateAfter=null});Y=0;sb(100)}function Ob(){if(i.lineWrapping){T.className+=" CodeMirror-wrap";var a=r.clientWidth/Vb()-3;t.iter(0,t.size,function(b){if(!b.hidden){var c=Math.ceil(b.text.length/a)||1;1!=c&&j(b,c)}});B.style.minWidth=Db.style.left=""}else T.className=T.className.replace(" CodeMirror-wrap",
""),xc(),t.iter(0,t.size,function(a){1!=a.height&&!a.hidden&&j(a,1)});pa.push({from:0,to:t.size})}function gb(){r.className=r.className.replace(/\s*cm-s-\S+/g,"")+i.theme.replace(/(^|\s)\s*/g," cm-s-")}function hb(){var a=aa[i.keyMap].style;T.className=T.className.replace(/\s*cm-keymap-\S+/g,"")+(a?" cm-keymap-"+a:"")}function Eb(a,b){this.lines=[];this.type=a;b&&(this.style=b)}function bc(a,b,c,e){var a=C(a),b=C(b),f=new Eb("range",c);if(e)for(var g in e)e.hasOwnProperty(g)&&(f[g]=e[g]);var h=a.line;
t.iter(h,b.line+1,function(c){c.markedSpans=(c.markedSpans||[]).concat([{from:h==a.line?a.ch:null,to:h==b.line?b.ch:null,marker:f}]);f.lines.push(c);++h});pa.push({from:a.line,to:b.line+1});return f}function Gc(a,b){var c=a,e=a;"number"==typeof a?e=g(va(a)):c=Ea(a);if(null!=c&&b(e,c))pa.push({from:c,to:c+1});else return null;return e}function ac(a,b){return Gc(a,function(a,d){if(a.hidden!=b){a.hidden=b;i.lineWrapping||(b&&a.text.length==ma.text.length?$a=!0:!b&&a.text.length>ma.text.length&&(ma=a,
$a=!1));j(a,b?0:1);var c=f.from.line,e=f.to.line;if(b&&(c==d||e==d)){c=c==d?sa({line:c,ch:0},c,0):f.from;e=e==d?sa({line:e,ch:0},e,0):f.to;if(!e)return;ab(c,e)}return la=!0}})}function cc(a,b){if(0==b)return{top:0,left:0};var c=m(a,b);Ha(Sa).appendChild(c);var c=c.anchor,e=c.offsetTop,f=c.offsetLeft;Ga&&(0==e&&0==f)&&(e=v("span","x"),c.parentNode.insertBefore(e,c.nextSibling),e=e.offsetTop);return{top:e,left:f}}function qa(a,b){var c,e=na(),f=e*($b(t,a.line)-(b?Pa:0));if(0==a.ch)c=0;else{var k=cc(g(a.line),
a.ch);c=k.left;i.lineWrapping&&(f+=Math.max(0,k.top))}return{x:c,y:f,yBot:f+e}}function Fb(a,b){function c(a){a=cc(j,a);if(p){var d=Math.round(a.top/e);u=d!=s;return Math.max(0,a.left+(d-s)*r.clientWidth)}return a.left}var e=na(),f=Vb(),k=Pa+Math.floor(b/e);if(0>k)return{line:0,ch:0};var h=Zb(t,k);if(h>=t.size)return{line:t.size-1,ch:g(t.size-1).text.length};var j=g(h),m=j.text,p=i.lineWrapping,s=p?k-$b(t,h):0;if(0>=a&&0==s)return{line:h,ch:0};for(var u=!1,o=k=0,m=m.length,n,f=Math.min(m,Math.ceil((a+
0.9*s*r.clientWidth)/f));;){var q=c(f);if(q<=a&&f<m)f=Math.min(m,Math.ceil(1.2*f));else{n=q;m=f;break}}if(a>n)return{line:h,ch:m};f=Math.floor(0.8*m);q=c(f);q<a&&(k=f,o=q);for(;;){if(1>=m-k)return n=a-o<n-a,{line:h,ch:n?k:m,after:n};f=Math.ceil((k+m)/2);q=c(f);q>a?(m=f,n=q,u&&(n+=1E3)):(k=f,o=q)}}function na(){if(null==Ta){Ta=v("pre");for(var a=0;49>a;++a)Ta.appendChild(document.createTextNode("x")),Ta.appendChild(v("br"));Ta.appendChild(document.createTextNode("x"))}a=$.clientHeight;if(a==Hc)return dc;
Hc=a;a=Ta.cloneNode(!0);Ha(Sa).appendChild(a);dc=Sa.firstChild.offsetHeight/50||1;Ha(Sa);return dc}function Vb(){if(r.clientWidth==Ic)return Jc;Ic=r.clientWidth;var a=v("span","x"),b=v("pre",[a]);Ha(Sa).appendChild(b);return Jc=a.offsetWidth||10}function Ya(a,b){var c=Ra(r,!0),e,f;try{e=a.clientX,f=a.clientY}catch(g){return null}if(!b&&(e-c.left>r.clientWidth||f-c.top>r.clientHeight))return null;c=Ra(B,!0);return Fb(e-c.left,f-c.top)}function Kc(a){function b(){Ia.style.position="relative";s.style.cssText=
g;ec&&(w.scrollTop=e);ca();if(null!=s.selectionStart){clearTimeout(fc);var a=s.value=" "+(y(f.from,f.to)?"":s.value),d=0;ea=" ";s.selectionStart=1;s.selectionEnd=a.length;fc=setTimeout(function Pc(){ea==" "&&s.selectionStart==0?p(Rb.selectAll)(A):d++<10?fc=setTimeout(Pc,500):xb()},200)}}var c=Ya(a),e=w.scrollTop;if(c&&!xa){(y(f.from,f.to)||K(c,f.from)||!K(c,f.to))&&p(Ba)(c.line,c.ch);var g=s.style.cssText;Ia.style.position="absolute";s.style.cssText="position: fixed; width: 30px; height: 30px; top: "+
(a.clientY-5)+"px; left: "+(a.clientX-5)+"px; z-index: 1000; background: white; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";ia();xb(!0);y(f.from,f.to)&&(s.value=ea=" ");if(cb){ib(a);var k=q(window,"mouseup",function(){k();setTimeout(b,20)},!0)}else setTimeout(b,50)}}function pb(){clearInterval(Ub);var a=!0;R.style.visibility="";Ub=setInterval(function(){R.style.visibility=(a=!a)?"":"hidden"},i.cursorBlinkRate)}function Lc(a){var b=f.inverted?f.from:f.to,
c=g(b.line),e=b.ch-1,i=0<=e&&gc[c.text.charAt(e)]||gc[c.text.charAt(++e)];if(i){i.charAt(0);for(var k=(i=">"==i.charAt(1))?1:-1,h=c.styles,j=e+1,m=0,r=h.length;m<r;m+=2)if(0>=(j-=h[m].length)){var n=h[m+1];break}h=[c.text.charAt(e)];j=/[(){}[\]]/;m=b.line;for(r=i?Math.min(m+100,t.size):Math.max(-1,m-100);m!=r;m+=k){var c=g(m),u=m==b.line,o;a:{o=u&&i?e+1:0;u=u&&!i?e:c.text.length;if(c.text)for(var s=c.styles,c=i?0:c.text.length-1,q=void 0,z=i?0:s.length-2,v=i?s.length:-2;z!=v;z+=2*k){var fa=s[z];if(s[z+
1]!=n)c+=k*fa.length;else for(var w=i?0:fa.length-1,ba=i?fa.length:-1;w!=ba;w+=k,c+=k)if(c>=o&&c<u&&j.test(q=fa.charAt(w))){var A=gc[q];if(">"==A.charAt(1)==i)h.push(q);else if(h.pop()!=A.charAt(0)){o={pos:c,match:!1};break a}else if(!h.length){o={pos:c,match:!0};break a}}}o=void 0}if(o)break}o||(o={pos:null,match:!1});var n=o.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket",C=bc({line:b.line,ch:e},{line:b.line,ch:e+1},n),B=null!=o.pos&&bc({line:m,ch:o.pos},{line:m,ch:o.pos+1},n),
b=p(function(){C.clear();B&&B.clear()});a?setTimeout(b,800):ya=b}}function Xa(a){var b;a:{for(var c,e,f=a,k=a-40;f>k;--f){if(0==f){b=0;break a}var h=g(f-1);if(h.stateAfter){b=f;break a}h=h.indentation(i.tabSize);if(null==e||c>h)e=f-1,c=h}b=e}var j=b&&g(b-1).stateAfter,j=j?Ua(N,j):Mc(N);t.iter(b,a,function(c){c.process(N,j,i.tabSize);c.stateAfter=b==a-1||0==b%5?Ua(N,j):null});return j}function nc(){if(!(Y>=J)){var a=+new Date+i.workTime,b=Ua(N,Xa(Y)),c=Y;t.iter(Y,J,function(c){Y>=E?(c.highlight(N,
b,i.tabSize),c.stateAfter=Ua(N,b)):(c.process(N,b,i.tabSize),c.stateAfter=0==Y%5?Ua(N,b):null);++Y;if(+new Date>a)return sb(i.workDelay),!0});J>c&&Y>=E&&p(function(){pa.push({from:c,to:Y})})()}}function sb(a){Y<J&&oc.set(a,nc)}function zc(){wa=zb=Oa=null;pa=[];Aa=!1;Za=[]}function Ac(){$a&&xc();if(rb&&!i.lineWrapping){var a=Db.offsetWidth,b=cc(ma,ma.text.length).left;Gb||(Db.style.left=b+"px",B.style.minWidth=b+a+"px");rb=!1}var c,e;Aa&&(a=Bc(),c=Dc(a.x,a.y,a.x,a.yBot));if(pa.length||c&&null!=c.scrollTop)e=
za(pa,!0,c&&c.scrollTop);e||(Aa&&Da(),la&&ua());if(c&&(a=Bc(),Cc(a.x,a.y,a.x,a.yBot),W)){c=oa.getBoundingClientRect();b=null;if(0>a.y+c.top)b=!0;else if(a.y+c.top+na()>(window.innerHeight||document.documentElement.clientHeight))b=!1;if(null!=b){if(c="none"==R.style.display)R.style.display="",R.style.left=a.x+"px",R.style.top=a.y-Pa+"px";R.scrollIntoView(b);c&&(R.style.display="none")}}Aa&&pb();W&&(!0===wa||!1!==wa&&Aa)&&xb(zb);Aa&&i.matchBrackets&&setTimeout(p(function(){if(ya){ya();ya=null}y(f.from,
f.to)&&Lc(false)}),20);b=Aa;a=Za;if(Oa&&i.onChange&&A)i.onChange(A,Oa);if(b&&i.onCursorActivity)i.onCursorActivity(A);for(b=0;b<a.length;++b)a[b](A);if(e&&i.onUpdate)i.onUpdate(A)}function p(a){return function(){vb++||zc();try{var b=a.apply(this,arguments)}finally{--vb||Ac()}return b}}function qc(a){H.startCompound();try{return a()}finally{H.endCompound()}}var i={},hc=n.defaults,db;for(db in hc)hc.hasOwnProperty(db)&&(i[db]=(b&&b.hasOwnProperty(db)?b:hc)[db]);var s=v("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em");
s.setAttribute("wrap","off");s.setAttribute("autocorrect","off");s.setAttribute("autocapitalize","off");var Ia=v("div",[s],null,"overflow: hidden; position: relative; width: 3px; height: 0px;"),wc=v("div",null,"CodeMirror-scrollbar-inner"),w=v("div",[wc],"CodeMirror-scrollbar"),$=v("div"),yb=v("div",null,null,"position: relative; z-index: -1"),R=v("pre","\u00a0","CodeMirror-cursor"),Db=v("pre","\u00a0","CodeMirror-cursor","visibility: hidden"),Sa=v("div",null,null,"position: absolute; width: 100%; height: 0px; overflow: hidden; visibility: hidden;"),
B=v("div",[Sa,R,Db,yb,$],null,"position: relative; z-index: 0"),Qa=v("div",null,"CodeMirror-gutter-text"),V=v("div",[Qa],"CodeMirror-gutter"),ub=v("div",[V,v("div",[B],"CodeMirror-lines")],null,"position: relative"),oa=v("div",[ub],null,"position: relative"),r=v("div",[oa],"CodeMirror-scroll");r.setAttribute("tabIndex","-1");var T=v("div",[Ia,w,r],"CodeMirror"+(i.lineWrapping?" CodeMirror-wrap":""));a.appendChild?a.appendChild(T):a(T);gb();hb();Yb&&(s.style.width="0px");tb||(r.draggable=!0);B.style.outline=
"none";null!=i.tabindex&&(s.tabIndex=i.tabindex);i.autofocus&&ia();!i.gutter&&!i.lineNumbers&&(V.style.display="none");ic&&(Ia.style.height="1px",Ia.style.position="absolute");Sc?(w.style.zIndex=-2,w.style.visibility="hidden"):Gb&&(w.style.minWidth="18px");var Wb=new jc,oc=new jc,Ub,N,t=new Hb([new Ib([new Na("")])]),Y=0,W;fb();var f={from:{line:0,ch:0},to:{line:0,ch:0},inverted:!1},ja,Jb,Kb,ra=0,kb,wb=!1,mb=!1,Xb=!1,wa,zb,pa,Oa,Aa,la,Za,Pa=0,E=0,J=0,Ec=0,ya,ma=g(0),$a=!1,rb=!0,La=!1,Ab=null;p(function(){fa(i.value||
"");wa=false})();var H=new Lb;q(r,"mousedown",p(function(a){function b(c){if(tb)r.draggable=false;kb=false;s();u();if(Math.abs(a.clientX-c.clientX)+Math.abs(a.clientY-c.clientY)<10){D(c);Ba(h.line,h.ch,true);ia()}}function c(a){if(j=="single")ha(h,a);else if(j=="double"){var d=Va(a);K(a,o)?ha(d.from,t):ha(o,d.to)}else j=="triple"&&(K(a,o)?ha(t,C({line:a.line,ch:0})):ha(o,C({line:a.line+1,ch:0})))}function e(a){var d=Ya(a,true);if(d&&!y(d,m)){W||P();m=d;c(d);wa=false;var b=Ca();if(d.line>=b.to||d.line<
b.from)n=setTimeout(p(function(){e(a)}),150)}}function g(a){clearTimeout(n);var d=Ya(a);d&&c(d);D(a);ia();wa=true;v();s()}Ka(F(a,"shiftKey"));for(var k=a.target||a.srcElement;k!=T;k=k.parentNode)if(k.parentNode==oa&&k!=ub)return;for(k=a.target||a.srcElement;k!=T;k=k.parentNode)if(k.parentNode==Qa){if(i.onGutterClick)i.onGutterClick(A,Mb(Qa.childNodes,k)+E,a);return D(a)}var h=Ya(a);switch(Nc(a)){case 3:cb&&Kc(a);return;case 2:h&&Ba(h.line,h.ch,true);setTimeout(ia,20);D(a);return}if(h){W||P();var k=
+new Date,j="single";if(Kb&&Kb.time>k-400&&y(Kb.pos,h)){j="triple";D(a);setTimeout(ia,20);k=h.line;ha({line:k,ch:0},C({line:k+1,ch:0}))}else if(Jb&&Jb.time>k-400&&y(Jb.pos,h)){j="double";Kb={time:k,pos:h};D(a);k=Va(h);ha(k.from,k.to)}else Jb={time:k,pos:h};var m=h,n;if(i.dragDrop&&kc&&!i.readOnly&&!y(f.from,f.to)&&!K(h,f.from)&&!K(f.to,h)&&j=="single"){if(tb)r.draggable=true;var s=q(document,"mouseup",p(b),true),u=q(r,"drop",p(b),true);kb=true;r.dragDrop&&r.dragDrop()}else{D(a);j=="single"&&Ba(h.line,
h.ch,true);var o=f.from,t=f.to,v=q(document,"mousemove",p(function(a){clearTimeout(n);D(a);!Ga&&!Nc(a)?g(a):e(a)}),true),s=q(document,"mouseup",p(g),true)}}else(a.target||a.srcElement)==r&&D(a)}));q(r,"dblclick",p(function(a){for(var b=a.target||a.srcElement;b!=T;b=b.parentNode)if(b.parentNode==Qa)return D(a);D(a)}));q(B,"selectstart",D);cb||q(r,"contextmenu",Kc);q(r,"scroll",function(){if(i.fixedGutter&&V.style.left!=r.scrollLeft+"px")V.style.left=r.scrollLeft+"px";if(r.scrollTop!=ra){ra=r.scrollTop;
if(w.scrollTop!=ra)w.scrollTop=ra;za([])}if(i.onScroll)i.onScroll(A)});q(w,"scroll",function(){if(w.scrollTop!=ra){ra=r.scrollTop=w.scrollTop;za([])}});q(w,"mousedown",function(){W&&setTimeout(ia,0)});var Tc=q(window,"resize",function(){T.parentNode?za(true):Tc()},!0);q(s,"keyup",p(function(a){if(!i.onKeyEvent||!i.onKeyEvent(A,Wa(a)))F(a,"keyCode")==16&&(ja=null)}));q(s,"input",bb);q(s,"keydown",p(vc));q(s,"keypress",p(function(a){La&&ba();if(!i.onKeyEvent||!i.onKeyEvent(A,Wa(a))){var b=F(a,"keyCode"),
c=F(a,"charCode");if(xa&&b==Tb){Tb=null;D(a)}else if(!(xa&&(!a.which||a.which<10)||ic)||!sc(a)){b=String.fromCharCode(c==null?b:c);i.electricChars&&N.electricChars&&i.smartIndent&&!i.readOnly&&N.electricChars.indexOf(b)>-1&&setTimeout(p(function(){Cb(f.to.line,"smart")}),75);if(b=ob("'"+b+"'",i.extraKeys,i.keyMap,function(a){return lb(a,true)})){D(a);pb()}b||bb()}}}));q(s,"focus",P);q(s,"blur",L);i.dragDrop&&(q(r,"dragstart",Pb),q(r,"dragenter",c),q(r,"dragover",c),q(r,"drop",p(x)));q(r,"paste",function(){ia();
bb()});q(s,"paste",function(){Xb=true;bb()});q(s,"cut",p(function(){i.readOnly||O("")}));ic&&q(oa,"mouseup",function(){document.activeElement==s&&s.blur();ia()});var Oc;try{Oc=document.activeElement==s}catch(Vc){}Oc||i.autofocus?setTimeout(P,20):L();var A=T.CodeMirror={getValue:function(a){var b=[];t.iter(0,t.size,function(a){b.push(a.text)});return b.join(a||"\n")},setValue:p(fa),getSelection:Qb,replaceSelection:p(O),focus:function(){window.focus();ia();P();bb()},setOption:function(a,b){var c=i[a];
i[a]=b;if(a=="mode"||a=="indentUnit")fb();else if(a=="readOnly"&&b=="nocursor"){L();s.blur()}else if(a=="readOnly"&&!b)xb(true);else if(a=="theme")gb();else if(a=="lineWrapping"&&c!=b)p(Ob)();else if(a=="tabSize")za(true);else if(a=="keyMap")hb();else if(a=="tabindex")s.tabIndex=b;if(a=="lineNumbers"||a=="gutter"||a=="firstLineNumber"||a=="theme"||a=="lineNumberFormatter"){c=i.gutter||i.lineNumbers;V.style.display=c?"":"none";c?la=true:$.parentNode.style.marginLeft=0;za(true)}},getOption:function(a){return i[a]},
getMode:function(){return N},undo:p(function(){M(H.done,H.undone)}),redo:p(function(){M(H.undone,H.done)}),indentLine:p(function(a,b){typeof b!="string"&&(b=b==null?i.smartIndent?"smart":"prev":b?"add":"subtract");e(a)&&Cb(a,b)}),indentSelection:p(function(a){if(y(f.from,f.to))return Cb(f.from.line,a);for(var b=f.to.line-(f.to.ch?0:1),c=f.from.line;c<=b;++c)Cb(c,a)}),historySize:function(){return{undo:H.done.length,redo:H.undone.length}},clearHistory:function(){H=new Lb},setHistory:function(a){H=
new Lb;H.done=a.done;H.undone=a.undone},getHistory:function(){function a(b){for(var d=0,c=[],e;d<b.length;++d){c.push(e=[]);for(var f=0,g=b[d];f<g.length;++f){var i=[],j=g[f];e.push({start:j.start,added:j.added,old:i});for(var m=0;m<j.old.length;++m)i.push(Q(j.old[m]))}}return c}return{done:a(H.done),undone:a(H.undone)}},matchBrackets:p(function(){Lc(true)}),getTokenAt:p(function(a){a=C(a);return g(a.line).getTokenAt(N,Xa(a.line),i.tabSize,a.ch)}),getStateAfter:function(a){a=va(a==null?t.size-1:a);
return Xa(a+1)},cursorCoords:function(a,b){if(a==null)a=f.inverted;return this.charCoords(a?f.from:f.to,b)},charCoords:function(a,b){a=C(a);if(b=="local")return qa(a,false);if(b=="div")return qa(a,true);var c=qa(a,true),e=Ra(B);return{x:e.left+c.x,y:e.top+c.y,yBot:e.top+c.yBot}},coordsChar:function(a){var b=Ra(B);return Fb(a.x-b.left,a.y-b.top)},markText:p(bc),setBookmark:function(a){var a=C(a),b=new Eb("bookmark"),c=g(a.line);H.addChange(a.line,1,[Ma(c.text,c.markedSpans)],true);c.markedSpans=(c.markedSpans||
[]).concat([{from:a.ch,to:a.ch,marker:b}]);b.lines.push(c);return b},findMarksAt:function(a){var a=C(a),b=[],c=g(a.line).markedSpans;if(c)for(var e=0;e<c.length;++e){var f=c[e];(f.from==null||f.from<=a.ch)&&(f.to==null||f.to>=a.ch)&&b.push(f.marker)}return b},setMarker:p(function(a,b,c){typeof a=="number"&&(a=g(va(a)));a.gutterMarker={text:b,style:c};la=true;return a}),clearMarker:p(function(a){typeof a=="number"&&(a=g(va(a)));a.gutterMarker=null;la=true}),setLineClass:p(function(a,b,c){return Gc(a,
function(a){if(a.className!=b||a.bgClassName!=c){a.className=b;a.bgClassName=c;return true}})}),hideLine:p(function(a){return ac(a,true)}),showLine:p(function(a){return ac(a,false)}),onDeleteLine:function(a,b){if(typeof a=="number"){if(!e(a))return null;a=g(a)}(a.handlers||(a.handlers=[])).push(b);return a},lineInfo:function(a){if(typeof a=="number"){if(!e(a))return null;var b=a,a=g(a);if(!a)return null}else{b=Ea(a);if(b==null)return null}var c=a.gutterMarker;return{line:b,handle:a,text:a.text,markerText:c&&
c.text,markerClass:c&&c.style,lineClass:a.className,bgClass:a.bgClassName}},getViewport:function(){return{from:E,to:J}},addWidget:function(a,b,c,e,f){var a=qa(C(a)),g=a.yBot,h=a.x;b.style.position="absolute";oa.appendChild(b);if(e=="over")g=a.y;else if(e=="near"){var e=Math.max(r.offsetHeight,t.height*na()),i=Math.max(oa.clientWidth,B.clientWidth)-B.offsetLeft;a.yBot+b.offsetHeight>e&&a.y>b.offsetHeight&&(g=a.y-b.offsetHeight);h+b.offsetWidth>i&&(h=i-b.offsetWidth)}b.style.top=g+B.offsetTop+"px";
b.style.left=b.style.right="";if(f=="right"){h=oa.clientWidth-b.offsetWidth;b.style.right="0px"}else{f=="left"?h=0:f=="middle"&&(h=(oa.clientWidth-b.offsetWidth)/2);b.style.left=h+B.offsetLeft+"px"}c&&Cc(h,g,h+b.offsetWidth,g+b.offsetHeight)},lineCount:function(){return t.size},clipPos:C,getCursor:function(a){if(a==null)a=f.inverted;return{line:(a?f.from:f.to).line,ch:(a?f.from:f.to).ch}},somethingSelected:function(){return!y(f.from,f.to)},setCursor:p(function(a,b,c){b==null&&typeof a.line=="number"?
Ba(a.line,a.ch,c):Ba(a,b,c)}),setSelection:p(function(a,b,c){(c?ha:ab)(C(a),C(b||a))}),getLine:function(a){if(e(a))return g(a).text},getLineHandle:function(a){if(e(a))return g(a)},setLine:p(function(a,b){e(a)&&S(b,{line:a,ch:0},{line:a,ch:g(a).text.length})}),removeLine:p(function(a){e(a)&&S("",{line:a,ch:0},C({line:a+1,ch:0}))}),replaceRange:p(S),getRange:function(a,b,c){return yc(C(a),C(b),c)},triggerOnKeyDown:p(vc),execCommand:function(a){return Rb[a](A)},moveH:p(function(a,b){var c=a<0?f.from:
f.to;if(ja||y(f.from,f.to))c=Ja(a,b);Ba(c.line,c.ch,true)}),deleteH:p(function(a,b){y(f.from,f.to)?a<0?S("",Ja(a,b),f.to):S("",f.from,Ja(a,b)):S("",f.from,f.to);zb=true}),moveV:p(function(a,b){var c=qa(f.inverted?f.from:f.to,true);if(Ab!=null)c.x=Ab;if(b=="page")var e=Math.min(r.clientHeight,window.innerHeight||document.documentElement.clientHeight),e=Fb(c.x,c.y+e*a);else if(b=="line"){e=na();e=Fb(c.x,c.y+0.5*e+a*e)}if(b=="page")w.scrollTop=w.scrollTop+(qa(e,true).y-c.y);Ba(e.line,e.ch,true);Ab=c.x}),
toggleOverwrite:function(){if(wb){wb=false;R.className=R.className.replace(" CodeMirror-overwrite","")}else{wb=true;R.className=R.className+" CodeMirror-overwrite"}},posFromIndex:function(a){var b=0,c;t.iter(0,t.size,function(e){e=e.text.length+1;if(e>a){c=a;return true}a=a-e;++b});return C({line:b,ch:c})},indexFromPos:function(a){if(a.line<0||a.ch<0)return 0;var b=a.ch;t.iter(0,a.line,function(a){b=b+(a.text.length+1)});return b},scrollTo:function(a,b){if(a!=null)r.scrollLeft=a;if(b!=null)w.scrollTop=
r.scrollTop=b;za([])},getScrollInfo:function(){return{x:r.scrollLeft,y:w.scrollTop,height:w.scrollHeight,width:r.scrollWidth}},setSize:function(a,b){function c(a){a=String(a);return/^\d+$/.test(a)?a+"px":a}if(a!=null)T.style.width=c(a);if(b!=null)r.style.height=c(b);A.refresh()},operation:function(a){return p(a)()},compoundChange:function(a){return qc(a)},refresh:function(){za(true,null,ra);if(w.scrollHeight>ra)w.scrollTop=ra},getInputField:function(){return s},getWrapperElement:function(){return T},
getScrollerElement:function(){return r},getGutterElement:function(){return V}},tc,Tb=null,ea="";Eb.prototype.clear=p(function(){for(var a,b,c=0;c<this.lines.length;++c){var e=this.lines[c],f=qb(e.markedSpans,this);f.from!=null&&(a=Ea(e));f.to!=null&&(b=Ea(e));for(var g=e,e=e.markedSpans,h=void 0,i=0;i<e.length;++i)e[i]!=f&&(h||(h=[])).push(e[i]);g.markedSpans=h}a!=null&&pa.push({from:a,to:b+1});this.lines.length=0;this.explicitlyCleared=true});Eb.prototype.find=function(){for(var a,b,c=0;c<this.lines.length;++c){var e=
this.lines[c],f=qb(e.markedSpans,this);if(f.from!=null||f.to!=null){e=Ea(e);f.from!=null&&(a={line:e,ch:f.from});f.to!=null&&(b={line:e,ch:f.to})}}return this.type=="bookmark"?a:a&&{from:a,to:b}};var dc,Hc,Ta,Jc,Ic=0,fc,gc={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"},vb=0,eb;for(eb in Nb)Nb.propertyIsEnumerable(eb)&&!A.propertyIsEnumerable(eb)&&(A[eb]=Nb[eb]);for(var lc=0;lc<mc.length;++lc)mc[lc](A);return A}function Sb(a){return"string"==typeof a?aa[a]:a}function ob(a,b,c,e,g){function j(b){var b=
Sb(b),c=b[a];if(!1===c)return g&&g(),!0;if(null!=c&&e(c))return!0;if(b.nofallthrough)return g&&g(),!0;b=b.fallthrough;if(null==b)return!1;if("[object Array]"!=Object.prototype.toString.call(b))return j(b);for(var c=0,n=b.length;c<n;++c)if(j(b[c]))return!0;return!1}return b&&j(b)?!0:j(c)}function uc(a){a=Fa[F(a,"keyCode")];return"Ctrl"==a||"Alt"==a||"Shift"==a||"Mod"==a}function Ua(a,b){if(!0===b)return b;if(a.copyState)return a.copyState(b);var c={},e;for(e in b){var g=b[e];g instanceof Array&&(g=
g.concat([]));c[e]=g}return c}function Mc(a,b,c){return a.startState?a.startState(b,c):!0}function Ca(a,b){this.pos=this.start=0;this.string=a;this.tabSize=b||8}function qb(a,b){if(a)for(var c=0;c<a.length;++c){var e=a[c];if(e.marker==b)return e}}function Q(a){return"string"==typeof a?a:a.text}function I(a){if("string"==typeof a)return null;for(var a=a.markedSpans,b=null,c=0;c<a.length;++c)a[c].marker.explicitlyCleared?b||(b=a.slice(0,c)):b&&b.push(a[c]);return!b?a:b.length?b:null}function Ma(a,b){return b?
{text:a,markedSpans:b}:a}function fb(a){var b=a.markedSpans;if(b){for(var c=0;c<b.length;++c){var e=b[c].marker.lines,g=Mb(e,a);e.splice(g,1)}a.markedSpans=null}}function Ob(a,b){if(b){for(var c=0;c<b.length;++c)b[c].marker.lines.push(a);a.markedSpans=b}}function Na(a,b){this.text=a;this.height=1;Ob(this,b)}function Ib(a){this.lines=a;this.parent=null;for(var b=0,c=a.length,e=0;b<c;++b)a[b].parent=this,e+=a[b].height;this.height=e}function Hb(a){this.children=a;for(var b=0,c=0,e=0,g=a.length;e<g;++e){var j=
a[e],b=b+j.chunkSize(),c=c+j.height;j.parent=this}this.size=b;this.height=c;this.parent=null}function Ea(a){if(null==a.parent)return null;for(var b=a.parent,a=Mb(b.lines,a),c=b.parent;c;b=c,c=c.parent)for(var e=0;c.children[e]!=b;++e)a+=c.children[e].chunkSize();return a}function Zb(a,b){var c=0;a:do{for(var e=0,g=a.children.length;e<g;++e){var j=a.children[e],m=j.height;if(b<m){a=j;continue a}b-=m;c+=j.chunkSize()}return c}while(!a.lines);e=0;for(g=a.lines.length;e<g;++e){j=a.lines[e].height;if(b<
j)break;b-=j}return c+e}function $b(a,b){var c=0;a:do{for(var e=0,g=a.children.length;e<g;++e){var j=a.children[e],m=j.chunkSize();if(b<m){a=j;continue a}b-=m;c+=j.height}return c}while(!a.lines);for(e=0;e<b;++e)c+=a.lines[e].height;return c}function Lb(){this.time=0;this.done=[];this.undone=[];this.compound=0;this.closed=!1}function nc(){ib(this)}function Wa(a){a.stop||(a.stop=nc);return a}function D(a){a.preventDefault?a.preventDefault():a.returnValue=!1}function gb(a){a.stopPropagation?a.stopPropagation():
a.cancelBubble=!0}function ib(a){D(a);gb(a)}function Nc(a){var b=a.which;null==b&&(a.button&1?b=1:a.button&2?b=3:a.button&4&&(b=2));nb&&(a.ctrlKey&&1==b)&&(b=3);return b}function F(a,b){return a.override&&a.override.hasOwnProperty(b)?a.override[b]:a[b]}function q(a,b,c,e){if("function"==typeof a.addEventListener){if(a.addEventListener(b,c,!1),e)return function(){a.removeEventListener(b,c,!1)}}else{var g=function(a){c(a||window.event)};a.attachEvent("on"+b,g);if(e)return function(){a.detachEvent("on"+
b,g)}}}function jc(){this.id=null}function Ja(a,b,c){null==b&&(b=a.search(/[^\s\u00a0]/),-1==b&&(b=a.length));for(var e=0,g=0;e<b;++e)"\t"==a.charAt(e)?g+=c-g%c:++g;return g}function Ra(a,b){try{var c=a.getBoundingClientRect(),c={top:c.top,left:c.left}}catch(e){c={top:0,left:0}}if(!b)if(null==window.pageYOffset){var g=document.documentElement||document.body.parentNode;null==g.scrollTop&&(g=document.body);c.top+=g.scrollTop;c.left+=g.scrollLeft}else c.top+=window.pageYOffset,c.left+=window.pageXOffset;
return c}function Fc(a){for(;Ka.length<=a;)Ka.push(G(Ka)+" ");return Ka[a]}function G(a){return a[a.length-1]}function y(a,b){return a.line==b.line&&a.ch==b.ch}function K(a,b){return a.line<b.line||a.line==b.line&&a.ch<b.ch}function v(a,b,c,e){a=document.createElement(a);c&&(a.className=c);e&&(a.style.cssText=e);if("string"==typeof b)hb(a,b);else if(b)for(c=0;c<b.length;++c)a.appendChild(b[c]);return a}function Ha(a){a.innerHTML="";return a}function hb(a,b){ec?(a.innerHTML="",a.appendChild(document.createTextNode(b))):
a.textContent=b}function Mb(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0,e=a.length;c<e;++c)if(a[c]==b)return c;return-1}function Bb(a){return/\w/.test(a)||a.toUpperCase()!=a.toLowerCase()||/[\u4E00-\u9FA5]/.test(a)}n.defaults={value:"",mode:null,theme:"default",indentUnit:2,indentWithTabs:!1,smartIndent:!0,tabSize:4,keyMap:"default",extraKeys:null,electricChars:!0,autoClearEmptyLines:!1,onKeyEvent:null,onDragEvent:null,lineWrapping:!1,lineNumbers:!1,gutter:!1,fixedGutter:!1,firstLineNumber:1,
readOnly:!1,dragDrop:!0,onChange:null,onCursorActivity:null,onViewportChange:null,onGutterClick:null,onUpdate:null,onFocus:null,onBlur:null,onScroll:null,matchBrackets:!1,cursorBlinkRate:530,workTime:100,workDelay:200,pollInterval:100,undoDepth:40,tabindex:null,autofocus:null,lineNumberFormatter:function(a){return a}};var Yb=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),nb=Yb||/Mac/.test(navigator.platform);/Win/.test(navigator.platform);var sa=n.modes={},ta=n.mimeModes=
{};n.defineMode=function(a,b){!n.defaults.mode&&"null"!=a&&(n.defaults.mode=a);if(2<arguments.length){b.dependencies=[];for(var c=2;c<arguments.length;++c)b.dependencies.push(arguments[c])}sa[a]=b};n.defineMIME=function(a,b){ta[a]=b};n.resolveMode=function(a){if("string"==typeof a&&ta.hasOwnProperty(a))a=ta[a];else if("string"==typeof a&&/^[\w\-]+\/[\w\-]+\+xml$/.test(a))return n.resolveMode("application/xml");return"string"==typeof a?{name:a}:a||{name:"null"}};n.getMode=function(a,b){var b=n.resolveMode(b),
c=sa[b.name];if(!c)return n.getMode(a,"text/plain");c=c(a,b);if(ua.hasOwnProperty(b.name)){var e=ua[b.name],g;for(g in e)e.hasOwnProperty(g)&&(c[g]=e[g])}c.name=b.name;return c};n.listModes=function(){var a=[],b;for(b in sa)sa.propertyIsEnumerable(b)&&a.push(b);return a};n.listMIMEs=function(){var a=[],b;for(b in ta)ta.propertyIsEnumerable(b)&&a.push({mime:b,mode:ta[b]});return a};var Nb=n.extensions={};n.defineExtension=function(a,b){Nb[a]=b};var mc=[];n.defineInitHook=function(a){mc.push(a)};var ua=
n.modeExtensions={};n.extendMode=function(a,b){var c=ua.hasOwnProperty(a)?ua[a]:ua[a]={},e;for(e in b)b.hasOwnProperty(e)&&(c[e]=b[e])};var Rb=n.commands={selectAll:function(a){a.setSelection({line:0,ch:0},{line:a.lineCount()-1})},killLine:function(a){var b=a.getCursor(!0),c=a.getCursor(!1),e=!y(b,c);!e&&a.getLine(b.line).length==b.ch?a.replaceRange("",b,{line:b.line+1,ch:0}):a.replaceRange("",b,e?c:{line:b.line})},deleteLine:function(a){var b=a.getCursor().line;a.replaceRange("",{line:b,ch:0},{line:b})},
undo:function(a){a.undo()},redo:function(a){a.redo()},goDocStart:function(a){a.setCursor(0,0,!0)},goDocEnd:function(a){a.setSelection({line:a.lineCount()-1},null,!0)},goLineStart:function(a){a.setCursor(a.getCursor().line,0,!0)},goLineStartSmart:function(a){var b=a.getCursor(),c=a.getLine(b.line),c=Math.max(0,c.search(/\S/));a.setCursor(b.line,b.ch<=c&&b.ch?0:c,!0)},goLineEnd:function(a){a.setSelection({line:a.getCursor().line},null,!0)},goLineUp:function(a){a.moveV(-1,"line")},goLineDown:function(a){a.moveV(1,
"line")},goPageUp:function(a){a.moveV(-1,"page")},goPageDown:function(a){a.moveV(1,"page")},goCharLeft:function(a){a.moveH(-1,"char")},goCharRight:function(a){a.moveH(1,"char")},goColumnLeft:function(a){a.moveH(-1,"column")},goColumnRight:function(a){a.moveH(1,"column")},goWordLeft:function(a){a.moveH(-1,"word")},goWordRight:function(a){a.moveH(1,"word")},delCharLeft:function(a){a.deleteH(-1,"char")},delCharRight:function(a){a.deleteH(1,"char")},delWordLeft:function(a){a.deleteH(-1,"word")},delWordRight:function(a){a.deleteH(1,
"word")},indentAuto:function(a){a.indentSelection("smart")},indentMore:function(a){a.indentSelection("add")},indentLess:function(a){a.indentSelection("subtract")},insertTab:function(a){a.replaceSelection("\t","end")},defaultTab:function(a){a.somethingSelected()?a.indentSelection("add"):a.replaceSelection("\t","end")},transposeChars:function(a){var b=a.getCursor(),c=a.getLine(b.line);0<b.ch&&b.ch<c.length-1&&a.replaceRange(c.charAt(b.ch)+c.charAt(b.ch-1),{line:b.line,ch:b.ch-1},{line:b.line,ch:b.ch+
1})},newlineAndIndent:function(a){a.replaceSelection("\n","end");a.indentLine(a.getCursor().line)},toggleOverwrite:function(a){a.toggleOverwrite()}},aa=n.keyMap={};aa.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharRight",Backspace:"delCharLeft",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite"};aa.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine",
"Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goWordLeft","Ctrl-Right":"goWordRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delWordLeft","Ctrl-Delete":"delWordRight","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore",fallthrough:"basic"};
aa.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goWordLeft","Alt-Right":"goWordRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delWordLeft","Ctrl-Alt-Backspace":"delWordRight","Alt-Delete":"delWordRight","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess",
"Cmd-]":"indentMore",fallthrough:["basic","emacsy"]};aa["default"]=nb?aa.macDefault:aa.pcDefault;aa.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageUp","Shift-Ctrl-V":"goPageDown","Ctrl-D":"delCharRight","Ctrl-H":"delCharLeft","Alt-D":"delWordRight","Alt-Backspace":"delWordLeft","Ctrl-K":"killLine","Ctrl-T":"transposeChars"};n.isModifierKey=uc;n.fromTextArea=
function(a,b){function c(){a.value=v.getValue()}b||(b={});b.value=a.value;!b.tabindex&&a.tabindex&&(b.tabindex=a.tabindex);if(null==b.autofocus){var e=document.body;try{e=document.activeElement}catch(g){}b.autofocus=e==a||null!=a.getAttribute("autofocus")&&e==document.body}if(a.form){var j=q(a.form,"submit",c,!0);if("function"==typeof a.form.submit){var m=a.form.submit;a.form.submit=function Pb(){c();a.form.submit=m;a.form.submit();a.form.submit=Pb}}}a.style.display="none";var v=n(function(b){a.parentNode.insertBefore(b,
a.nextSibling)},b);v.save=c;v.getTextArea=function(){return a};v.toTextArea=function(){c();a.parentNode.removeChild(v.getWrapperElement());a.style.display="";if(a.form){j();if(typeof a.form.submit=="function")a.form.submit=m}};return v};var cb=/gecko\/\d{7}/i.test(navigator.userAgent),Ga=/MSIE \d/.test(navigator.userAgent),Gb=/MSIE [1-7]\b/.test(navigator.userAgent),ec=/MSIE [1-8]\b/.test(navigator.userAgent),Rc=Ga&&5==document.documentMode,tb=/WebKit\//.test(navigator.userAgent),x=/Chrome\//.test(navigator.userAgent),
xa=/Opera\//.test(navigator.userAgent),oc=/Apple Computer/.test(navigator.vendor),ic=/KHTML\//.test(navigator.userAgent),Sc=/Mac OS X 10\D([7-9]|\d\d)\D/.test(navigator.userAgent);n.copyState=Ua;n.startState=Mc;n.innerMode=function(a,b){for(;a.innerMode;)var c=a.innerMode(b),b=c.state,a=c.mode;return c||{mode:a,state:b}};Ca.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return 0==this.pos},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){if(this.pos<
this.string.length)return this.string.charAt(this.pos++)},eat:function(a){var b=this.string.charAt(this.pos);if("string"==typeof a?b==a:b&&(a.test?a.test(b):a(b)))return++this.pos,b},eatWhile:function(a){for(var b=this.pos;this.eat(a););return this.pos>b},eatSpace:function(){for(var a=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>a},skipToEnd:function(){this.pos=this.string.length},skipTo:function(a){a=this.string.indexOf(a,this.pos);if(-1<a)return this.pos=
a,!0},backUp:function(a){this.pos-=a},column:function(){return Ja(this.string,this.start,this.tabSize)},indentation:function(){return Ja(this.string,null,this.tabSize)},match:function(a,b,c){if("string"==typeof a){if((c?this.string.toLowerCase():this.string).indexOf(c?a.toLowerCase():a,this.pos)==this.pos)return!1!==b&&(this.pos+=a.length),!0}else{if((a=this.string.slice(this.pos).match(a))&&0<a.index)return null;a&&!1!==b&&(this.pos+=a[0].length);return a}},current:function(){return this.string.slice(this.start,
this.pos)}};n.StringStream=Ca;var Va=" ";cb||Ga&&!Gb?Va="\u200b":xa&&(Va="");Na.prototype={update:function(a,b){this.text=a;this.stateAfter=this.styles=null;fb(this);Ob(this,b)},highlight:function(a,b,c){var c=new Ca(this.text,c),e=this.styles||(this.styles=[]),g=e.length=0;for(""==this.text&&a.blankLine&&a.blankLine(b);!c.eol();){var j=a.token(c,b),m=c.current();c.start=c.pos;g&&e[g-1]==j?e[g-2]+=m:m&&(e[g++]=m,e[g++]=j);if(5E3<c.pos){e[g++]=this.text.slice(c.pos);e[g++]=null;break}}},process:function(a,
b,c){c=new Ca(this.text,c);for(""==this.text&&a.blankLine&&a.blankLine(b);!c.eol()&&5E3>=c.pos;)a.token(c,b),c.start=c.pos},getTokenAt:function(a,b,c,e){for(c=new Ca(this.text,c);c.pos<e&&!c.eol();){c.start=c.pos;var g=a.token(c,b)}return{start:c.start,end:c.pos,string:c.current(),className:g||null,state:b}},indentation:function(a){return Ja(this.text,null,a)},getContent:function(a,b,c){function e(b,c,e){if(c){j&&(Ga&&" "==c.charAt(0))&&(c="\u00a0"+c.slice(1));j=!1;if(n.test(c))for(var g=document.createDocumentFragment(),
q=0;;){n.lastIndex=q;var x=n.exec(c),y=x?x.index-q:c.length-q;y&&(g.appendChild(document.createTextNode(c.slice(q,q+y))),m+=y);if(!x)break;q+=y+1;"\t"==x[0]?(x=a-m%a,g.appendChild(v("span",Fc(x),"cm-tab")),m+=x):(y=v("span","\u2022","cm-invalidchar"),y.title="\\u"+x[0].charCodeAt(0).toString(16),g.appendChild(y),m+=1)}else{m+=c.length;var g=document.createTextNode(c)}e?b.appendChild(v("span",[g],e)):b.appendChild(g)}}function g(a){return!a?null:"cm-"+a.replace(/ +/g," cm-")}var j=!0,m=0,n=/[\t\u0000-\u0019\u200b\u2028\u2029\uFEFF]/g,
q=v("pre"),y=e;if(null!=b)var x=0,D=q.anchor=v("span"),y=function(a,g,j){var m=g.length;if(b>=x&&b<x+m){var n=b-x;if(n&&(e(a,g.slice(0,n),j),c)){var q=g.slice(n-1,n+1);va.test(q)?a.appendChild(v("wbr")):!Gb&&/\w\w/.test(q)&&a.appendChild(document.createTextNode("\u200d"))}a.appendChild(D);e(D,xa?g.slice(n,n+1):g.slice(n),j);xa&&e(a,g.slice(n+1),j);b--;x+=m}else x+=m,e(a,g,j),x==b&&x==F?(hb(D,Va),a.appendChild(D)):x>b+10&&/\s/.test(g)&&(y=function(){})};var K=this.styles,P=this.text,L=this.markedSpans,
F=P.length;if(!P&&null==b)y(q," ");else if(!L||!L.length)for(L=P=0;L<F;P+=2){var M=K[P],Q=K[P+1],Z=M.length;L+Z>F&&(M=M.slice(0,F-L));L+=Z;y(q,M,g(Q))}else{L.sort(function(a,b){return a.from-b.from});for(var P=M=0,Z="",X=L[0].from||0,I=[],S=0;M<F;){if(X==M){for(X=void 0;S<L.length&&((X=L[S]).from==M||null==X.from);)"range"==X.marker.type&&I.push(X),++S;for(var X=S<L.length?L[S].from:Infinity,O=0;O<I.length;++O){var da=I[O].to;null==da&&(da=Infinity);da==M?I.splice(O--,1):X=Math.min(da,X)}}for(O=Math.min(F,
X);;){if(Z){for(var da=M+Z.length,G=Q,aa=0;aa<I.length;++aa){var ca=I[aa],G=(G?G+" ":"")+ca.marker.style;ca.marker.endStyle&&ca.to===Math.min(da,O)&&(G+=" "+ca.marker.endStyle);ca.marker.startStyle&&ca.from===M&&(G+=" "+ca.marker.startStyle)}y(q,da>O?Z.slice(0,O-M):Z,G);if(da>=O){Z=Z.slice(O-M);M=O;break}M=da}Z=K[P++];Q=g(K[P++])}}}return q},cleanUp:function(){this.parent=null;fb(this)}};Ib.prototype={chunkSize:function(){return this.lines.length},remove:function(a,b,c){for(var e=a,g=a+b;e<g;++e){var j=
this.lines[e];this.height-=j.height;j.cleanUp();if(j.handlers)for(var m=0;m<j.handlers.length;++m)c.push(j.handlers[m])}this.lines.splice(a,b)},collapse:function(a){a.splice.apply(a,[a.length,0].concat(this.lines))},insertHeight:function(a,b,c){this.height+=c;this.lines=this.lines.slice(0,a).concat(b).concat(this.lines.slice(a));a=0;for(c=b.length;a<c;++a)b[a].parent=this},iterN:function(a,b,c){for(b=a+b;a<b;++a)if(c(this.lines[a]))return!0}};Hb.prototype={chunkSize:function(){return this.size},remove:function(a,
b,c){this.size-=b;for(var e=0;e<this.children.length;++e){var g=this.children[e],j=g.chunkSize();if(a<j){var m=Math.min(b,j-a),n=g.height;g.remove(a,m,c);this.height-=n-g.height;j==m&&(this.children.splice(e--,1),g.parent=null);if(0==(b-=m))break;a=0}else a-=j}25>this.size-b&&(a=[],this.collapse(a),this.children=[new Ib(a)],this.children[0].parent=this)},collapse:function(a){for(var b=0,c=this.children.length;b<c;++b)this.children[b].collapse(a)},insert:function(a,b){for(var c=0,e=0,g=b.length;e<
g;++e)c+=b[e].height;this.insertHeight(a,b,c)},insertHeight:function(a,b,c){this.size+=b.length;this.height+=c;for(var e=0,g=this.children.length;e<g;++e){var j=this.children[e],m=j.chunkSize();if(a<=m){j.insertHeight(a,b,c);if(j.lines&&50<j.lines.length){for(;50<j.lines.length;)a=j.lines.splice(j.lines.length-25,25),a=new Ib(a),j.height-=a.height,this.children.splice(e+1,0,a),a.parent=this;this.maybeSpill()}break}a-=m}},maybeSpill:function(){if(!(10>=this.children.length)){var a=this;do{var b=a.children.splice(a.children.length-
5,5),b=new Hb(b);if(a.parent){a.size-=b.size;a.height-=b.height;var c=Mb(a.parent.children,a);a.parent.children.splice(c+1,0,b)}else c=new Hb(a.children),c.parent=a,a.children=[c,b],a=c;b.parent=a.parent}while(10<a.children.length);a.parent.maybeSpill()}},iter:function(a,b,c){this.iterN(a,b-a,c)},iterN:function(a,b,c){for(var e=0,g=this.children.length;e<g;++e){var j=this.children[e],m=j.chunkSize();if(a<m){m=Math.min(b,m-a);if(j.iterN(a,m,c))return!0;if(0==(b-=m))break;a=0}else a-=m}}};Lb.prototype=
{addChange:function(a,b,c){this.undone.length=0;var e=+new Date,g=G(this.done),j=g&&G(g),m=e-this.time;if(g&&!this.closed&&this.compound)g.push({start:a,added:b,old:c});else if(400<m||!j||this.closed||j.start>a+c.length||j.start+j.added<a)this.done.push([{start:a,added:b,old:c}]),this.closed=!1;else{for(var g=Math.max(0,j.start-a),m=Math.max(0,a+c.length-(j.start+j.added)),n=g;0<n;--n)j.old.unshift(c[n-1]);for(n=m;0<n;--n)j.old.push(c[c.length-n]);g&&(j.start=a);j.added+=b-(c.length-g-m)}this.time=
e},startCompound:function(){this.compound++||(this.closed=!0)},endCompound:function(){--this.compound||(this.closed=!0)}};n.e_stop=ib;n.e_preventDefault=D;n.e_stopPropagation=gb;n.connect=q;jc.prototype={set:function(a,b){clearTimeout(this.id);this.id=setTimeout(b,a)}};var rc=n.Pass={toString:function(){return"CodeMirror.Pass"}},kc;if(ec)kc=!1;else{var Da=v("div");kc="draggable"in Da||"dragDrop"in Da}Da=v("textarea");Da.value="foo\nbar";Da.value.indexOf("\r");var va=/^$/;cb?va=/$'/:oc?va=/\-[^ \-?]|\?[^ !'\"\),.\-\/:;\?\]\}]/:
x&&(va=/\-[^ \-\.?]|\?[^ \-\.?\]\}:;!'\"\),\/]|[\.!\"#&%\)*+,:;=>\]|\}~][\(\{\[<]|\$'/);var Ka=[""],jb=3!="\n\nb".split(/\n/).length?function(a){for(var b=0,c=[],e=a.length;b<=e;){var g=a.indexOf("\n",b);-1==g&&(g=a.length);var j=a.slice(b,"\r"==a.charAt(g-1)?g-1:g),m=j.indexOf("\r");-1!=m?(c.push(j.slice(0,m)),b+=m+1):(c.push(j),b=g+1)}return c}:function(a){return a.split(/\r\n?|\n/)};n.splitLines=jb;var Qc=window.getSelection?function(a){try{return a.selectionStart!=a.selectionEnd}catch(b){return!1}}:
function(a){try{var b=a.ownerDocument.selection.createRange()}catch(c){}return!b||b.parentElement()!=a?!1:0!=b.compareEndPoints("StartToEnd",b)};n.defineMode("null",function(){return{token:function(a){a.skipToEnd()}}});n.defineMIME("text/plain","null");var Fa={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",
59:";",91:"Mod",92:"Mod",93:"Mod",109:"-",107:"=",127:"Delete",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",63272:"Delete"};n.keyNames=Fa;for(x=0;10>x;x++)Fa[x+48]=String(x);for(x=65;90>=x;x++)Fa[x]=String.fromCharCode(x);for(x=1;12>=x;x++)Fa[x+111]=Fa[x+63235]="F"+x;n.version="2.35";return n}();